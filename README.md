## 操作系统实验三
### <center> ------基于内存的文件系统

-------------------------------
 > #### 实验环境:  Ubuntu 16.04(LTS)

---------------------------------------------
 > #### 设计方案
 > - 本文件系统主要参考了EXT2文件系统的组织模式，整个系统的数据结构分为三个部分： 
 >   - Super Block               //配置块，包含了文件系统的大小，根目录所在的块序号等等
 >   - Data Block Bitmap    //占用一个块，其中包含的每个比特的数据都对应这个Bitmap所在的Block Group中的Data Block，如果某个比特的值为0，则表示其对应的Data Block中有数据，如果值为1，则表示对应的Data Block是空闲的。
 >   - Data block                //数据块，用于存放数据以及下一块的序号信息
 > - 本文件系统系统设计系统块大小为32K
 > - 设计了一段连续的文件系统地址空间，文件系统地址空间大小为256M(可扩展)
 > - 文件系统的所有内容，包括了文件系统大小，块的占用与否信息，块之间的关系均映射到了文件系统地址空间 
 > - 文件系统的空间切分为了(size/blocksize)个块，需要时（写块时）将需要的对应块通过mmap映射到进程地址空间【在ofs_write_blk函数处实现】，不需要时(rm)通过munmap释放了对应内存【在ofs_rm函数处实现】
 > - 选做实现了二级目录操作（建立目录、删除目录），较为健壮的错误处理（如文件不存在、超出分配内存大小、分配块不成功等等..)，不支持文件权限及用户ID管理，不支持扩展名。


---------------------------------
> ####  测试程序
> - 文件写入和读取正常，且结果相同
> - dd if=/dev/zero of=testfile bs=1M count=200  oflag=direct(绕过buff cache)
>    - 记录了200+0 的读入
>    - 记录了200+0 的写出
>    - 209715200 bytes (210 MB, 200 MiB) copied, 17.7032 s, 11.8 MB/s
> - rm testfile  成功删除
> - 创建目录，删除目录成功
> - 多次删除并重新创建大文件成功
